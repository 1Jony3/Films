# Films
# Android-приложение для отображения списка фильмов и просмотра информации о них.
![petal_20220404_170453 1](https://user-images.githubusercontent.com/90905407/161551401-39dcd8c4-22b9-4efa-84f4-b78808d0d5d1.gif)
# Фидбэк:
## Недочеты в поведении приложения:
- Нет индикатора загрузки при скачивании фильмов.

- ~~Если у фильма в списке фильмов есть изображение, но оно ещё не успело скачаться, то отображается текст "Изображение не найдено", хотя оно просто ещё не скачалось. Момент скачивания стоит показывать каким-то другим способом, чтобы не дезинформировать пользователя.⁓⁓

- На экране фильма отсутствует кнопка "Назад" в заголовке.

- В горизонтальной ориентации искажены пропорции изображений в списке фильмов.

- ~~На экране с просмотром фильма скроллится только описание фильма. Лучше делать прокручиваемым весь экран. Ведь если другая информация о фильме (название, рейтинг и т.д.) займут много места по высоте, то описание вообще не поместится на экран, или будет слишком узким, чтобы со скроллом было удобно взаимодействовать.⁓⁓

- Если открыть приложение с выключенным интернетом, то показывается пустой экран. Стоит информировать пользователя о возникшей ошибке, например, показом сообщения "Проверьте интернет соединение". А ещё лучше, если будет возможность повторить операцию, не выходя из приложения.

## Недочеты по коду приложения:
- ~~В разметках некоторые идентификаторы называются с большой буквы, а некоторые - с маленькой. Какие-то через camelCase, а какие-то - через snake_case. Стоит зафикироать стиль именования и называть одинаково.⁓⁓

- ~~Все тексты, отображаемые в приложении, нужно выносить в файлы ресурсов, чтобы была возможность локализовать приложение на другие языки, а так же, чтобы сконцентрировать все тексты в одном месте.⁓⁓

- В классе "MainActivity" присутствует нарушение уровня абстракции - действие по добавлению фрагмента "DetailsFragment" вынесено в метод "showFragment", но для фрагмента "ListFragment" никакого метода не заведено, для него код написан напрямую в "onCreate". Посмотрите, возможно есть способ завести для них единый метод, который управляет фрагментами, потому что сейчас между этими действиями много общего.

- Не рекомендуется переключать Activity в режим ручной обработки смены конфигурации, так как вы теряете возможность автоматически загружать ресурсы под текущую конфигурацию. Детальное объяснение есть в предупреждении здесь: https://developer.android.com/guide/topics/resources/runtime-changes#HandlingTheChange. "Caution: Handling the configuration change yourself can make it much more difficult to use alternative resources, because the system does not automatically apply them for you. This technique should be considered a last resort when you must avoid restarts due to a configuration change and is not recommended for most applications.". Чтобы при этом сохранять состояние экранов при смене ориентации, есть множество других способов - складывать данные в saveInstanceState, использовать ViewModel или другие сторонние библиотеки, такие как Moxy для MVP. Чтобы при этом не ломалась навигация, все фрагменты, включая стартовый экран, необходимо помещать в backstack, чтобы они корректно автоматически восстановились системой. Для этого так же можно использовать библиотеки навигации, такие как Navigation Component от Google или стороннюю библиотеку Cicerone, которые самостоятельно корректно управляют backstack-ом.



- Паттерн MVP подразумевает отделение отображения (View) от данных (Model) посредством промежуточной сущности - Presenter. В качестве View в Android могут выступать Activity и Fragment-ы, которые должны сообщать Presenter-у о произошедших событиях, а Presenter должен перенаправлять их выполнение каким-либо классам, в которых реализована логика обращения с данными (Model). Но в вашем коде между Presenter-ом и View появилась сущность Interactor, в которой содержится логика обращения с данными (Model), что нарушает саму идею отделения отображения от данных. Связи должны быть такими: Fragment хранит ссылку на Presenter. Presenter хранит ссылку на View, которая является Fragment-ом, и ссылку на Interactor. Interactor не хранит никаких ссылок ни на Fragment, ни на Presenter, а лишь возвращает результат выполнения операций назад, например, через callback-и. Вся реализация внешнего вида, например, RecyclerView.Adapter-ы, обращение с Glide, занание текста текстовым View не должны находиться в Presenter-е.



- У Fragment-а есть специальный метод "onViewCreated", который предназначен для работы с view после её создания. В "onCreateView" нужно лишь создать view через inflate и вернуть её.

- В некоторых местах есть методы, выполняющие сразу несколько действий, хотя их названия говорят только об одном действии. Например, метод "DetailsFragment.loadData" не только загружает данные, но и производит поиск view по идентификаторам. Это две разные операции, и они должны быть разбиты на два соответствующих метода. Либо названия методов вообще противоречат тому, что они не самом деле делают, например, метод "FilmsAdapter.filterFilms" не фильтрует фильмы, а направляет фильмы в RecyclerView для отображения.

- В классах для приёма данных от сервера некоторые поля проименованы в стиле snake_case. Стоит именовать по аналогии со свойствами в других классах, через camelCase, настраивая парсер JSON-а на приём данных в виде snake_case.

# Рекомендации:
- Для улучшения навыков написания читаемого и поддерживаемого кода рекомендуем изучить книгу "Чистый код. Создание, анализ и рефакторинг" Роберта Мартина. Для краткого ознакомления с основными принципами, адаптированными под язык Kotlin, можете изучить этот документ: https://github.com/sequenia/CleanCode/blob/languages/kotlin/languages/KOTLIN.md.

- Разобраться с разделением кода приложения на слои. Что должно быть во View, а что в Presenter-е. В этом помогут две статьи:

Заблуждения Clean Architecture https://habr.com/ru/company/mobileup/blog/335382/

Различия между MVVM и остальными MV*-паттернами https://habr.com/ru/company/mobileup/blog/313538/

